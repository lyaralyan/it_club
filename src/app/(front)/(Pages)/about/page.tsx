"use client";
import Wrapper from "@front/components/Wrapper";
import AboutItem from "@front/(Pages)/about/AboutItem";
import { useQuery } from "@apollo/client";
import { GET_ABOUT_US } from "@/app/requests/query";

// const data: Array<{
//   id: number;
//   h2: string;
//   h3: string;
//   text1: string;
//   text2: string;
//   picture: StaticImageData;
// }> = [
//   {
//     id: Math.random(),
//     h2: "Մեր մասին",
//     h3: "Ինչով ենք մենք տարբերվում.",
//     text1:
//       "Մենք կրթական կենտրոն ենք, որի առաքելությունն է նպաստել տեղեկատվական տեխնոլոգիաների ոլորտում նոր մասնագետների ձևավորմանը։ Մեր ծրագրերը նախատեսված են այն անձանց համար, ովքեր ձգտում են ձեռք բերել գործնական հմտություններ և կառուցել կայուն կարիերա ՏՏ ոլորտում։",
//     text2:
//       "Օրինակելի մենթորներ՝ ոլորտի փորձառու մասնագետներից Գործնական կրթություն՝ իրական նախագծերի միջոցով։ Փոքր խմբեր՝ անհատական մոտեցման համար։ Ժամանակակից, աշխատաշուկային համապատասխան դասընթացներ։ Ուսանողների շարունակական աջակցություն և կարիերայի ուղղորդում Օրինակելի մենթորներ՝ ոլորտի փորձառու մասնագետներից։ Գործնական կրթություն՝ իրական նախագծերի միջոցով Փոքր խմբեր՝ անհատական մոտեցման համար",
//     picture: about_us,
//   },
//   {
//     id: Math.random(),
//     h2: "Մեր նպատակը",
//     h3: "Ինչով ենք մենք տարբերվում.",
//     text1:
//       "Մենք կրթական կենտրոն ենք, որի առաքելությունն է նպաստել տեղեկատվական տեխնոլոգիաների ոլորտում նոր մասնագետների ձևավորմանը։ Մեր ծրագրերը նախատեսված են այն անձանց համար, ովքեր ձգտում են ձեռք բերել գործնական հմտություններ և կառուցել կայուն կարիերա ՏՏ ոլորտում։",
//     text2:
//       "Օրինակելի մենթորներ՝ ոլորտի փորձառու մասնագետներից Գործնական կրթություն՝ իրական նախագծերի միջոցով։ Փոքր խմբեր՝ անհատական մոտեցման համար։ Ժամանակակից, աշխատաշուկային համապատասխան դասընթացներ։ Ուսանողների շարունակական աջակցություն և կարիերայի ուղղորդում Օրինակելի մենթորներ՝ ոլորտի փորձառու մասնագետներից։ Գործնական կրթություն՝ իրական նախագծերի միջոցով Փոքր խմբեր՝ անհատական մոտեցման համար",
//     picture: about_us2,
//   },
//   {
//     id: Math.random(),
//     h2: "Մեր առաքելությունը",
//     h3: "Ինչով ենք մենք տարբերվում.",
//     text1:
//       "Մենք կրթական կենտրոն ենք, որի առաքելությունն է նպաստել տեղեկատվական տեխնոլոգիաների ոլորտում նոր մասնագետների ձևավորմանը։ Մեր ծրագրերը նախատեսված են այն անձանց համար, ովքեր ձգտում են ձեռք բերել գործնական հմտություններ և կառուցել կայուն կարիերա ՏՏ ոլորտում։",
//     text2:
//       "Օրինակելի մենթորներ՝ ոլորտի փորձառու մասնագետներից Գործնական կրթություն՝ իրական նախագծերի միջոցով։ Փոքր խմբեր՝ անհատական մոտեցման համար։ Ժամանակակից, աշխատաշուկային համապատասխան դասընթացներ։ Ուսանողների շարունակական աջակցություն և կարիերայի ուղղորդում Օրինակելի մենթորներ՝ ոլորտի փորձառու մասնագետներից։ Գործնական կրթություն՝ իրական նախագծերի միջոցով Փոքր խմբեր՝ անհատական մոտեցման համար",
//     picture: about_us3,
//   },
// ];

const About = () => {
  const { data, loading, error } = useQuery(GET_ABOUT_US);

  if (loading) return <p>Loading</p>;
  if (error) return <p>Error Loading Data</p>;

  const aboutUsData =
    data?.getAboutUs && typeof data.getAboutUs === "object"
      ? (Object.entries(data.getAboutUs)
          .filter(([, value]) => typeof value === "object" && value !== null)
          .map(([key, value]) => {
            const v = value as {
              title?: string;
              subTitle?: string;
              description?: string;
              image?: string;
            };
            return {
              id: key,
              title: v.title ?? "",
              subTitle: v.subTitle ?? "",
              description: v.description ?? "",
              image: v.image ?? "",
            };
          }) as AboutItemProp[])
      : [];


  return (
    <Wrapper className={"mt-[70px]"}>
      {aboutUsData.map((item: AboutItemProp, idx: number) => (
        <AboutItem
          key={item.id}
          item={{
            id: item.id,
            title: item.title ?? "",
            subTitle: item.subTitle ?? "",
            description: item.description ?? "",
            image: item.image ?? "",
          }}
          index={idx}
        />
      ))}
    </Wrapper>
  );
};

export default About;
